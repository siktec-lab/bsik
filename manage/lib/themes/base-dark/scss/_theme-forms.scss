// Forms basic
// Input +  label wrapper styles
$input-padding-y: 0.85rem;
$input-padding-x: 1rem;
$input-padding-y-sm: $input-padding-y * 0.75;
$input-padding-x-sm: $input-padding-x * 0.75;
$input-padding-y-lg: $input-padding-y * 1.25;
$input-padding-x-lg: $input-padding-x * 1.25;
$form-file-button-color: $admin-base-text-sub;
$form-file-button-bg: lighten($admin-base-background, 10%);
$form-file-button-hover-bg: lighten($admin-base-background, 20%);
$sikform-input-color: $admin-base-text-main;
$sikform-input-placeholder-color: $admin-base-text-sub;
$sikform-input-bg: lighten($admin-base-background, 5%);
$sikform-input-bg-focus: lighten($admin-base-background, 5%);
$sikform-input-border: 2px solid lighten($admin-base-primary-color, 10%);
$sikform-input-border-focus: 2px solid lighten($admin-base-primary-color, 20%);
$sikform-input-transition: border-color .15s ease-in-out,
box-shadow .15s ease-in-out;
$sikform-input-caret-color: $admin-base-text-main;
$sikform-input-caret-focus-color: lighten($admin-base-primary-color, 20%);
$sikform-input-caret-stroke-color: $admin-base-background;
$sikform-input-caret-stroke-width: 25;
$sikform-select-indicator: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'><path fill='none' stroke='#{$admin-base-text-main}' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/></svg>");
$sikform-select-indicator-disabled: url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'><path fill='none' stroke='#{darken($admin-base-text-main, 30%)}' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M2 5l6 6 6-6'/></svg>");
$sikform-input-caret-svg: "data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 700'><path fill='#{$sikform-input-caret-color}' stroke='#{$sikform-input-caret-stroke-color}' stroke-width='#{$sikform-input-caret-stroke-width}' d='M 285.476 377.971 L 91.132 572.314 c -9.373 9.373 -24.569 9.373 -33.941 0 l -22.667 -22.667 c -9.357 -9.357 -9.375 -24.522 -0.04 -33.901 L 188.505 361 L 34.484 206.255 c -9.335 -9.379 -9.317 -24.544 0.04 -33.901 l 22.667 -22.667 c 9.373 -9.373 24.569 -9.373 33.941 0 L 285.475 344.03 c 9.373 9.372 9.373 24.568 0.001 33.941 z'/></svg>";
$sikform-input-caret-focus-svg: "data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 320 700'><path fill='#{$sikform-input-caret-focus-color}' stroke='#{$sikform-input-caret-stroke-color}' stroke-width='#{$sikform-input-caret-stroke-width}' d='M 285.476 377.971 L 91.132 572.314 c -9.373 9.373 -24.569 9.373 -33.941 0 l -22.667 -22.667 c -9.357 -9.357 -9.375 -24.522 -0.04 -33.901 L 188.505 361 L 34.484 206.255 c -9.335 -9.379 -9.317 -24.544 0.04 -33.901 l 22.667 -22.667 c 9.373 -9.373 24.569 -9.373 33.941 0 L 285.475 344.03 c 9.373 9.372 9.373 24.568 0.001 33.941 z'/></svg>";
$sikform-input-icon-caret: "M 285.476 377.971 L 91.132 572.314 c -9.373 9.373 -24.569 9.373 -33.941 0 l -22.667 -22.667 c -9.357 -9.357 -9.375 -24.522 -0.04 -33.901 L 188.505 361 L 34.484 206.255 c -9.335 -9.379 -9.317 -24.544 0.04 -33.901 l 22.667 -22.667 c 9.373 -9.373 24.569 -9.373 33.941 0 L 285.475 344.03 c 9.373 9.372 9.373 24.568 0.001 33.941 z";
$sikform-formtext-color: $admin-base-text-sub;
.sik-form-init {
    //
    // Form Control
    //
    .form-control {
        position: relative;
        color: $sikform-input-color;
        background-color: $sikform-input-bg;
        border: 0;
        padding: $input-padding-y $input-padding-x;
        border-radius: 0.35rem;
        box-shadow: none;
        @include transition($sikform-input-transition);
        &[type="file"] {
            overflow: hidden; // prevent pseudo element button overlap
            &:not(:disabled):not([readonly]) {
                cursor: pointer;
            }
        }
        // Customize the `:focus` state to imitate native WebKit styles.
        &:focus {
            color: $sikform-input-color;
            border-color: inherit;
            background-color: $sikform-input-bg-focus;
            outline: 0;
            box-shadow: none;
            box-shadow: 0px 4px 3px -0.2rem lighten($admin-base-primary-color, 20%);
        }
        // Add some height to date inputs on iOS
        &::-webkit-date-and-time-value {
            height: if(unit($input-line-height)=="", $input-line-height * 1em, $input-line-height);
        }
        // Placeholder
        &::placeholder {
            color: $sikform-input-placeholder-color;
            opacity: 1;
        }
        // Disabled and read-only inputs
        &:disabled,
        &[readonly] {
            background-color: darken($sikform-input-bg, 2%);
            border-color: $input-disabled-border-color;
            opacity: 1;
        }
        // File input buttons theming
        &::file-selector-button {
            padding: $input-padding-y $input-padding-x;
            margin: (-$input-padding-y) (-$input-padding-x);
            margin-inline-end: $input-padding-x;
            color: $form-file-button-color;
            @include gradient-bg($form-file-button-bg);
            pointer-events: none;
            border-color: inherit;
            border-style: solid;
            border-width: 0;
            border-inline-end-width: $input-border-width;
            border-radius: 0; // stylelint-disable-line property-disallowed-list
            @include transition($btn-transition);
        }
        &:hover:not(:disabled):not([readonly])::file-selector-button {
            background-color: $form-file-button-hover-bg;
            color: lighten($admin-base-primary-color, 20%);
        }
        &::-webkit-file-upload-button {
            padding: $input-padding-y $input-padding-x;
            margin: (-$input-padding-y) (-$input-padding-x);
            margin-inline-end: $input-padding-x;
            color: $form-file-button-color;
            @include gradient-bg($form-file-button-bg);
            pointer-events: none;
            border-color: inherit;
            border-style: solid;
            border-width: 0;
            border-inline-end-width: $input-border-width;
            border-radius: 0; // stylelint-disable-line property-disallowed-list
            @include transition($btn-transition);
        }
        &:hover:not(:disabled):not([readonly])::-webkit-file-upload-button {
            background-color: $form-file-button-hover-bg;
            color: lighten($admin-base-primary-color, 5%);
        }
    }
    //
    // Form text
    //
    .form-text {
        color: $sikform-formtext-color;
    }
    // Readonly controls as plain text
    .form-control-plaintext {
        display: block;
        width: 100%;
        padding: $input-padding-y 0;
        margin-bottom: 0; // match inputs if this class comes on inputs with default margins
        line-height: $input-line-height;
        color: $input-plaintext-color;
        background-color: transparent;
        border: solid transparent;
        border-width: $input-border-width 0;
        &.form-control-sm,
        &.form-control-lg {
            padding-right: 0;
            padding-left: 0;
        }
    }
    .form-control-sm {
        padding: $input-padding-y-sm $input-padding-x-sm;
        &::file-selector-button {
            padding: $input-padding-y-sm $input-padding-x-sm;
            margin: (-$input-padding-y-sm) (-$input-padding-x-sm);
            margin-inline-end: $input-padding-x-sm;
        }
        &::-webkit-file-upload-button {
            padding: $input-padding-y-sm $input-padding-x-sm;
            margin: (-$input-padding-y-sm) (-$input-padding-x-sm);
            margin-inline-end: $input-padding-x-sm;
        }
    }
    .form-control-lg {
        padding: $input-padding-y-lg $input-padding-x-lg;
        &::file-selector-button {
            padding: $input-padding-y-lg $input-padding-x-lg;
            margin: (-$input-padding-y-lg) (-$input-padding-x-lg);
            margin-inline-end: $input-padding-x-lg;
        }
        &::-webkit-file-upload-button {
            padding: $input-padding-y-lg $input-padding-x-lg;
            margin: (-$input-padding-y-lg) (-$input-padding-x-lg);
            margin-inline-end: $input-padding-x-lg;
        }
    }
    // Make sure textareas don't shrink too much when resized
    textarea {
        &.form-control {
            border: 0;
        }
    }
    // stylelint-enable selector-no-qualifying-type
    .form-control-color {
        max-width: 4rem;
        height: auto; // Override fixed browser height
        padding: $input-padding-y;
        &:not(:disabled):not([readonly]) {
            cursor: pointer;
        }
        &::-moz-color-swatch {
            height: if(unit($input-line-height)=="", $input-line-height * 1em, $input-line-height);
            @include border-radius($input-border-radius);
        }
        &::-webkit-color-swatch {
            height: if(unit($input-line-height)=="", $input-line-height * 1em, $input-line-height);
            @include border-radius($input-border-radius);
        }
    }
    //
    // Form Select
    //
    // Replaces the browser default select with a custom one, mostly pulled from
    .form-select {
        display: block;
        width: 100%;
        color: $sikform-input-color;
        background-color: $sikform-input-bg;
        border: 0;
        padding: $input-padding-y $input-padding-x;
        border-radius: 0.35rem;
        background-image: escape-svg($sikform-select-indicator);
        background-repeat: no-repeat;
        &:focus {
            border-color: $form-select-focus-border-color;
            outline: 0;
            @if $enable-shadows {
                @include box-shadow($form-select-box-shadow,
                $form-select-focus-box-shadow);
            }
            @else {
                box-shadow: $form-select-focus-box-shadow;
            }
        }
        &[multiple],
        &[size]:not([size="1"]) {
            padding-right: $form-select-padding-x;
            background-image: none;
        }
        &:disabled {
            color: darken($sikform-input-color, 40%);
            background-color: darken($sikform-input-bg, 2%);
            background-image: escape-svg($sikform-select-indicator-disabled);
        }
        // Remove outline from select box in FF
        &:-moz-focusring {
            color: transparent;
            text-shadow: 0 0 0 $form-select-color;
        }
    }
    .form-select-sm {
        padding: $input-padding-y-sm $input-padding-x-sm;
        @include font-size($form-select-font-size-sm);
    }
    .form-select-lg {
        padding: $input-padding-y-lg $input-padding-x-lg;
        @include font-size($form-select-font-size-lg);
    }
}